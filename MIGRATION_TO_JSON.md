# üöÄ –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ JSON-based —Å–∏—Å—Ç–µ–º—É —à–∞–±–ª–æ–Ω–æ–≤

**–î–∞—Ç–∞:** 2026-02-12  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–û–¢–û–í–û –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ

---

## üìä –ó–∞—á–µ–º –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å?

### –ü—Ä–æ–±–ª–µ–º—ã —Å—Ç–∞—Ä–æ–π —Å–∏—Å—Ç–µ–º—ã

‚ùå –°–ª–æ–∂–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å (–Ω—É–∂–µ–Ω Word + –ø–æ–Ω–∏–º–∞–Ω–∏–µ Python)  
‚ùå –õ–æ–≥–∏–∫–∞ –ø–æ–∏—Å–∫–∞ —Ä–∞–∑–º–∞–∑–∞–Ω–∞ –ø–æ –∫–æ–¥—É  
‚ùå –°–ª–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —à–∞–±–ª–æ–Ω—ã  
‚ùå –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –∑–∞—à–∏—Ç—ã –≤ –∫–æ–¥  

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã

‚úÖ **–ü—Ä–æ—Å—Ç–æ—Ç–∞**: —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –ª—é–±–æ–º —Ç–µ–∫—Å—Ç–æ–≤–æ–º —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ  
‚úÖ **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å**: –≤—Å—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤ –æ–¥–Ω–æ–º JSON —Ñ–∞–π–ª–µ  
‚úÖ **–ì–∏–±–∫–æ—Å—Ç—å**: –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å/–º–µ–Ω—è—Ç—å —à–∞–±–ª–æ–Ω—ã  
‚úÖ **–¢–æ—á–Ω–æ—Å—Ç—å**: 100% —É—Å–ø–µ—à–Ω–æ—Å—Ç—å –Ω–∞ –≤—Å–µ—Ö —Ç–µ—Å—Ç–∞—Ö  

---

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

| –¢–µ—Å—Ç | –°—Ç–∞—Ä–∞—è —Å–∏—Å—Ç–µ–º–∞ | –ù–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ |
|------|---------------|--------------|
| RUEDIMAKSI RU3A-01 | ‚ùå Material is not defined | ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤ RU3A-01 |
| Duplicate PO RUEDIGIPER | ‚ùå Duplicate PO RUEDIMISHL | ‚úÖ Duplicate PO RUEDIGIPER |
| "–í–æ–∑–Ω–∏–∫–ª–∞ –æ—à–∏–±–∫–∞" + RUEDIGIPER | ‚ùå –®–∞–±–ª–æ–Ω "–ê—é" | ‚úÖ Duplicate PO RUEDIGIPER |
| Duplicate PO RUEDIMISHL | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |

**–£—Å–ø–µ—à–Ω–æ—Å—Ç—å: 100% (4/4 —Ç–µ—Å—Ç–∞)**

---

## üìÅ –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã

```
Test/
‚îú‚îÄ‚îÄ templates/
‚îÇ   ‚îî‚îÄ‚îÄ error_templates_config.json   ‚Üê –ì–õ–ê–í–ù–´–ô —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ letters_templates_v2.py            ‚Üê –ù–æ–≤—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä
‚îú‚îÄ‚îÄ JSON_TEMPLATES_README.md           ‚Üê –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ MIGRATION_TO_JSON.md               ‚Üê –≠—Ç–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
‚îî‚îÄ‚îÄ test_json_templates.py             ‚Üê –¢–µ—Å—Ç—ã
```

---

## üîß –®–∞–≥ 1: –û–±–Ω–æ–≤–∏—Ç–µ app.py

### –û—Ç–∫—Ä–æ–π—Ç–µ `app.py` –∏ –Ω–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É:

```python
from letters_templates import template_manager
```

### –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞:

```python
# –ò—Å–ø–æ–ª—å–∑—É–µ–º –Ω–æ–≤—É—é JSON-based —Å–∏—Å—Ç–µ–º—É (v2)
from letters_templates_v2 import template_manager
```

**–≠—Ç–æ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –≤ app.py!** –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω–æ–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π.

---

## üß™ –®–∞–≥ 2: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ

### 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

```bash
python test_json_templates.py
```

–î–æ–ª–∂–Ω—ã –ø—Ä–æ–π—Ç–∏ –≤—Å–µ 4 —Ç–µ—Å—Ç–∞.

### 2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ app.py:

```bash
python app.py
```

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:

- **–í–∫–ª—é—á–∏—Ç–µ —Ä–µ–∂–∏–º –ø–∏—Å—å–º–∞**
- –í–≤–µ–¥–∏—Ç–µ: `Duplicate PO found for ship-to customer RUEDIGIPER`
- –î–æ–ª–∂–µ–Ω –Ω–∞–π—Ç–∏—Å—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —à–∞–±–ª–æ–Ω

- **–í—ã–∫–ª—é—á–∏—Ç–µ —Ä–µ–∂–∏–º –ø–∏—Å—å–º–∞**
- –í–≤–µ–¥–∏—Ç–µ: `–ß—Ç–æ —Ç—ã —É–º–µ–µ—à—å?`
- –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å—Å—è –æ–±—ã—á–Ω—ã–π –æ—Ç–≤–µ—Ç

---

## üìù –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —à–∞–±–ª–æ–Ω

### –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª:

```
templates/error_templates_config.json
```

### –î–æ–±–∞–≤—å—Ç–µ –≤ –º–∞—Å—Å–∏–≤ `templates`:

```json
{
  "id": "new_error_example",
  "name": "–ù–æ–≤–∞—è –æ—à–∏–±–∫–∞ –ø—Ä–∏–º–µ—Ä",
  "description": "–ù–æ–≤–∞—è –æ—à–∏–±–∫–∞ –ø—Ä–∏–º–µ—Ä",
  "patterns": [
    "–∫–ª—é—á–µ–≤–æ–µ_—Å–ª–æ–≤–æ_1",
    "–∫–ª—é—á–µ–≤–æ–µ_—Å–ª–æ–≤–æ_2",
    "–∫–æ–¥_–∫–ª–∏–µ–Ω—Ç–∞"
  ],
  "action": "block_and_notify",
  "msg_file": "idoc_zablokirovan.msg",
  "priority": 15,
  "comment": "–ë–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å IDoc –∏ –æ–ø–æ–≤–µ—Å—Ç–∏—Ç—å CSA"
}
```

### –û–±—ä—è—Å–Ω–µ–Ω–∏–µ –ø–æ–ª–µ–π:

- **`id`**: —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ª–∞—Ç–∏–Ω–∏—Ü—É –∏ –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏—è)
- **`name`**: –ø–æ–ª–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞
- **`description`**: –∫–æ—Ä–æ—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é)
- **`patterns`**: —Å–ø–∏—Å–æ–∫ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ –¥–ª—è –ø–æ–∏—Å–∫–∞
- **`action`**: –¥–µ–π—Å—Ç–≤–∏–µ
  - `block_and_notify` - –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –∏ –æ–ø–æ–≤–µ—Å—Ç–∏—Ç—å
  - `block_no_notify` - –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –±–µ–∑ –æ–ø–æ–≤–µ—â–µ–Ω–∏—è
  - `push_and_notify` - –ø—Ä–æ—Ç–æ–ª–∫–Ω—É—Ç—å –∏ –æ–ø–æ–≤–µ—Å—Ç–∏—Ç—å
  - `lenta_gln_change` - –∑–∞–º–µ–Ω–∞ GLN –¥–ª—è –õ–µ–Ω—Ç—ã
- **`msg_file`**: –∏–º—è `.msg` —Ñ–∞–π–ª–∞ –≤ –ø–∞–ø–∫–µ `templates/errors/`
- **`priority`**: –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (—á–µ–º –±–æ–ª—å—à–µ —á–∏—Å–ª–æ, —Ç–µ–º –≤—ã—à–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
  - 20+ = –æ—á–µ–Ω—å —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
  - 15 = –æ—à–∏–±–∫–∏ —Å –∫–æ–¥–æ–º –∫–ª–∏–µ–Ω—Ç–∞
  - 10 = –æ–±—â–∏–µ –æ—à–∏–±–∫–∏ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
  - 8 = –æ–±—â–∏–µ –æ—à–∏–±–∫–∏
  - 5 = –Ω–∏–∑–∫–æ–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ
- **`comment`**: –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –¥–ª—è —Å–µ–±—è (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)

### –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ñ–∞–π–ª

–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤—Å—Ç—É–ø—è—Ç –≤ —Å–∏–ª—É –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ `app.py` –∏–ª–∏ –≤—ã–∑–æ–≤–∞ `template_manager.reload_config()`.

---

## üéØ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã

**–í–ê–ñ–ù–û:** –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã —Ä–µ—à–∞—é—Ç –∫–∞–∫–æ–π —à–∞–±–ª–æ–Ω –≤—ã–±—Ä–∞—Ç—å –∫–æ–≥–¥–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–æ–≤–ø–∞–¥–∞—é—Ç.

### –ü—Ä–∏–º–µ—Ä—ã –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

| –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –®–∞–±–ª–æ–Ω | –ü–æ—á–µ–º—É |
|-----------|--------|--------|
| **20** | RUEDIMAKSI + RU3A-01 | –û—á–µ–Ω—å —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–π (8 –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤) |
| **15** | Duplicate PO + –∫–æ–¥ –∫–ª–∏–µ–Ω—Ç–∞ | –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∫–ª–∏–µ–Ω—Ç (4 –ø–∞—Ç—Ç–µ—Ä–Ω–∞) |
| **10** | Function LF does not exist | –û–±—â–∞—è –æ—à–∏–±–∫–∞ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ |
| **8** | Material is not defined | –û–±—â–∞—è –æ—à–∏–±–∫–∞ (2 –ø–∞—Ç—Ç–µ—Ä–Ω–∞) |
| **5** | –ê—é (GLN –∫–ª–∏–µ–Ω—Ç–∞) | –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç - –∏–∑–±–µ–≥–∞–µ–º –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π |

### –ü—Ä–∞–≤–∏–ª–æ:

**–ß–ï–ú –ë–û–õ–¨–®–ï –ß–ò–°–õ–û = –¢–ï–ú –í–´–®–ï –ü–†–ò–û–†–ò–¢–ï–¢**

---

## üîç –û—Ç–ª–∞–¥–∫–∞

### –í–∫–ª—é—á–∏—Ç—å –ø–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥:

```python
from letters_templates_v2 import template_manager

result = template_manager.find_matching_template(
    query="–≤–∞—à –∑–∞–ø—Ä–æ—Å",
    debug=True  # ‚Üê –ü–æ–∫–∞–∂–µ—Ç –≤—Å–µ —à–∞–≥–∏ –ø–æ–∏—Å–∫–∞
)
```

–í—ã —É–≤–∏–¥–∏—Ç–µ:
- –ö–∞–∫–∏–µ —à–∞–±–ª–æ–Ω—ã –ø—Ä–æ–≤–µ—Ä—è–ª–∏—Å—å
- –°–∫–æ–ª—å–∫–æ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ —Å–æ–≤–ø–∞–ª–æ
- –í—ã—á–∏—Å–ª–µ–Ω–Ω—ã–µ –±–∞–ª–ª—ã
- –ü–æ—á–µ–º—É –≤—ã–±—Ä–∞–Ω –∏–º–µ–Ω–Ω–æ —ç—Ç–æ—Ç —à–∞–±–ª–æ–Ω

---

## üìã –ß–µ–∫–ª–∏—Å—Ç –º–∏–≥—Ä–∞—Ü–∏–∏

- [ ] –û–±–Ω–æ–≤–∏—Ç—å –∏–º–ø–æ—Ä—Ç –≤ `app.py`: `from letters_templates_v2 import template_manager`
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã: `python test_json_templates.py`
- [ ] –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å `app.py`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∂–∏–º –ø–∏—Å—å–º–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±—ã—á–Ω—ã–π —Ä–µ–∂–∏–º –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- [ ] (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –î–æ–±–∞–≤–∏—Ç—å —Å–≤–æ–∏ —à–∞–±–ª–æ–Ω—ã –≤ JSON

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:

–°–º. **`JSON_TEMPLATES_README.md`** –¥–ª—è:
- –ü–æ–¥—Ä–æ–±–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã JSON
- –ü—Ä–∏–º–µ—Ä–æ–≤ —à–∞–±–ª–æ–Ω–æ–≤
- –õ–æ–≥–∏–∫–∏ –ø–æ–∏—Å–∫–∞
- FAQ

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:

–°–º. **`templates/error_templates_config.json`** –¥–ª—è:
- –í—Å–µ—Ö —Ç–µ–∫—É—â–∏—Ö —à–∞–±–ª–æ–Ω–æ–≤
- –ù–∞—Å—Ç—Ä–æ–µ–∫ –¥–µ–π—Å—Ç–≤–∏–π
- –ì–ª–æ–±–∞–ª—å–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

---

## üéâ –ò—Ç–æ–≥–æ

### –ß—Ç–æ –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ:

‚úÖ **–¢–æ—á–Ω–æ—Å—Ç—å 100%** - –≤—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã  
‚úÖ **–ü—Ä–æ—Å—Ç–æ—Ç–∞** - —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ JSON –≤ –ª—é–±–æ–º —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ  
‚úÖ **–ì–∏–±–∫–æ—Å—Ç—å** - –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —à–∞–±–ª–æ–Ω—ã  
‚úÖ **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å** - –≤—Å—è –ª–æ–≥–∏–∫–∞ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏  
‚úÖ **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–æ —Å—Ç–∞—Ä—ã–º `app.py`  

### –í—Å–µ–≥–æ 1 —Å—Ç—Ä–æ–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∫–æ–¥–µ:

```python
# –ë—ã–ª–æ:
from letters_templates import template_manager

# –°—Ç–∞–ª–æ:
from letters_templates_v2 import template_manager
```

**–ì–æ—Ç–æ–≤–æ!** üöÄ

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ** —á—Ç–æ `templates/error_templates_config.json` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ** `python test_json_templates.py` - –¥–æ–ª–∂–Ω—ã –ø—Ä–æ–π—Ç–∏ –≤—Å–µ —Ç–µ—Å—Ç—ã
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ** —á—Ç–æ –∏–∑–º–µ–Ω–∏–ª–∏ –∏–º–ø–æ—Ä—Ç –≤ `app.py`
4. **–í–∫–ª—é—á–∏—Ç–µ** `debug=True` –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–π –æ—Ç–ª–∞–¥–∫–∏

---

**–£—Å–ø–µ—à–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏!** üéâ
